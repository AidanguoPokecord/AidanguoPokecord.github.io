<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="../style.css">
        <script>
            var canvas;
            var ctx;
            var requestId;
            var time = 0;
            var xPosition = 0;
            var MAX_TIME=50;
            const UNIT = 10;
            window.onload = init;
            function init(){
                setupCanvas();
                requestId= requestAnimationFrame(animationloop);
                //drawKirby("walk",1)
            }
            function setupCanvas(){
                canvas = document.getElementById("MyCanvas");
                ctx = canvas.getContext("2d");
            }
            function animationloop(){
                ctx.clearRect(0,0,canvas.width, canvas.height)
                updateTime();
                updatexPosition();
                animateCharacter();
                requestId =requestAnimationFrame(animationloop);
            }
            function updateTime(){
                if(time<MAX_TIME){
                    time += 1;
                
                } else {
                    time = 0
                }
            }
            function updatexPosition(){
                if(xPosition < canvas.width) {
                    xPosition+=1
                } else {
                    xPosition = 0
                }
            }
            function animateCharacter() {
                ctx.save();
                ctx.translate(xPosition, 0);
                if(0 <=time && time <MAX_TIME/4){
                    drawKirby("walk",1);
                }else if(MAX_TIME/4 <= time && time < 2*MAX_TIME/4){
                    drawKirby("walk",2);
                } else if(2*MAX_TIME/4 <= time && time < 3*MAX_TIME/4){
                    drawKirby("walk",3);

                }else if(3*MAX_TIME/4 <= time && time < MAX_TIME){
                    drawKirby("walk",4)
                }
                ctx.restore();

            }
        
        </script>
        <script src="drawKirby.js"></script>
        <script src="drawBackground.js"></script>
    </head>

<body>
    <header>
        <h1>walk</h1>

    </header>
    <nav>
        <a href="animation.html">animation</a>
    </nav>
    <section>
        <canvas id="MyCanvas" width="700" height="500"></canvas>

    </section>
    <footer>

    </footer>
    
</body>
</html>